<script src="../../bower_components/page/page.js"></script>
<script>
  window.addEventListener('WebComponentsReady', function() {

    page('/', function () {
        page.redirect('/careers');
      
    });

    page('/:route', function (data) {
      var route = data.params.route;
      app.route = route;

      // Unfocus previous page
      $('[data-route]').removeClass('focused');

      // Close drawer on page select
      var drawerPanel = document.querySelector('#paperDrawerPanel');
      if (drawerPanel.narrow) {
        drawerPanel.closeDrawer();
      }

      // Show pop-up on firstRun
      if(route == 'careers' && firstRun){
        var dialog = document.getElementById('dbdialog');
        dialog.open();
        firstRun = false;
      }
      else{
        document.querySelector('paper-scroll-header-panel').scrollTop = 0;
        document.querySelector('paper-scroll-header-panel').condense(true);
      }

      // Focus current page
      $('[data-route="'+route+'"').addClass('focused');
    });

    // add #! before urls
    page({
      hashbang: true
    });

  });
</script>
